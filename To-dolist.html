<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>To-Do List</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <link rel="stylesheet" href="to-dolist.css">

    <style>
       
    </style>
</head>

<body>
    <main id="main">

        <div class="gradient gradient-1"></div>
        <div class="gradient gradient-2"></div>
        <div class="gradient gradient-3"></div>
        <div class="gradient gradient-4"></div>
        <div class="gradient gradient-5"></div>
        <div class="gradient gradient-6"></div>
        <div class="gradient gradient-7"></div>
        <div class="gradient gradient-8"></div>
        <div class="gradient gradient-9"></div>
        <div class="gradient gradient-10"></div>
        <div class="gradient gradient-11"></div>
        <div class="gradient gradient-12"></div>
        <div class="gradient gradient-13"></div>
        <div class="gradient gradient-14"></div>
        <div class="gradient gradient-15"></div>
        <div class="gradient gradient-16"></div>
        <div class="gradient gradient-17"></div>


        <div class="container">
            <div class="Heading-box text-center">
                <h1 class="Main-heading">To-Do LIST</h1>

            </div>
            <div class="inputContainer">
                <input type="text" class="form-control" id="Check">
                <!-- Container div for text input and calendar icon -->
                <span class="date-picker-container">
                    <!-- Text input to display the selected date -->
                    <input type="text" id="datepicker" placeholder="Select a date" style="display: none;">

                    <!-- Button with calendar icon to trigger the date picker -->
                    <button id="datePickerButton" title="Select a date"></button>
                </span>

                <input type="submit" class="btn btn-primary" id="submitBTN" value="Submit">
            </div>

            <hr>

            <div class="Show" id="Show">
                <div class="TasksList ">
                    <!-- Dynamic tasks will be added here -->
                </div>
            </div>

            <div class="footer">
                Copyrights Reserved
            </div>
        </div>


    </main>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        const Check = document.getElementById("Check");
        const Submit = document.getElementById("submitBTN");
        const Show = document.getElementById("Show");

        $(function () {
            $("#datePickerButton").click(function () {
                $("#datepicker").datepicker("show");
            });

            $("#datepicker").datepicker({
                dateFormat: "dd/mm/yy",
                onClose: function (dateText, inst) { }
            });
        });

        Submit.addEventListener("click", () => {
            const taskText = Check.value.trim();
            const taskDate = $("#datepicker").val();

            if (!taskText) {
                alert("Please fill task");
                return;
            }

            const newTask = document.createElement('div');
            newTask.classList.add('taskItem');

            const label = document.createElement('label');
            label.classList.add('custom-input');

            const taskContent = document.createElement('input');
            taskContent.type = 'text';
            taskContent.id = 'Input-field';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = 'Done';
            checkbox.checked = false;
            checkbox.addEventListener('change', () => handleCheckboxChange(checkbox, taskContent));

            const checkmark = document.createElement('div');
            checkmark.classList.add('custom-input-checkmark');

            label.appendChild(checkbox);
            label.appendChild(checkmark);

            newTask.appendChild(label);





            // Concatenate taskText and Dateshow.textContent for taskContent value
            taskContent.value = taskText;
            taskContent.classList.add('form-control');
            taskContent.setAttribute("readonly", "readonly");

            const buttonsContainer = document.createElement('div');
            buttonsContainer.classList.add('Buttons-box');

            const editButton = document.createElement('button');
            editButton.textContent = 'Edit';
            editButton.classList.add('btn', 'btn-warning');
            editButton.addEventListener('click', () => {
                if (editButton.innerText.toLowerCase() == "edit") {
                    taskContent.removeAttribute("readonly");
                    editButton.innerText = "Save";
                } else {
                    taskContent.setAttribute("readonly", "readonly");
                    taskContent.blur();
                    editButton.innerText = "Edit";
                }
            });

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.classList.add('btn', 'btn-danger');
            deleteButton.addEventListener('click', () => {
                newTask.remove();
            });

            buttonsContainer.appendChild(editButton);
            buttonsContainer.appendChild(deleteButton);

            newTask.appendChild(taskContent);

            if (taskDate) {

                // Create a separate span element for Dateshow
                const Dateshow = document.createElement('span');
                Dateshow.textContent = "Due Date: " + taskDate;
                Dateshow.classList.add('alert', 'alert-primary', 'DDate');

                newTask.appendChild(Dateshow);
            }


            newTask.appendChild(buttonsContainer);

            function handleCheckboxChange(checkbox, taskContent) {
                if (checkbox.checked) {
                    taskContent.style.textDecoration = "line-through";
                    taskContent.style.color = "#888";
                } else {
                    taskContent.style.textDecoration = "none";
                    taskContent.style.color = "#000";
                }
            }
            Show.querySelector('.TasksList').appendChild(newTask);
            Check.value = '';
            $("#datepicker").val('');
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</body>

</html>